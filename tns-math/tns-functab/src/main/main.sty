% == PACKAGES == %

\RequirePackage{nicematrix}[6.26]


% == TOOLS == %

% -- DSL - L3 -- %

% :: ???? :: %

\ExplSyntaxOn

\NewDocumentEnvironment{functable}{ b }{%
  WIP:
  \par
  \medskip
  \splitlines:n { #1 } %
}{}

% Rescan trick: https://tex.stackexchange.com/a/706773/6880

\tl_new:N \g_pmbc_splitsemicolon_semicolon_tl
\tl_gset:Nn \g_pmbc_splitsemicolon_semicolon_tl { ; }
\cs_generate_variant:Nn \seq_set_split_keep_spaces:Nnn { NV }

\AtBeginDocument
 {
  \tl_gset_rescan:NnV \g_pmbc_splitsemicolon_semicolon_tl {} \g_pmbc_splitsemicolon_semicolon_tl
 }


\cs_new:Npn \splitlines:n #1 {
  \seq_set_split_keep_spaces:NVn \l_tmpa_seq \g_pmbc_splitsemicolon_semicolon_tl { #1 }

  $
    \seq_use:Nn \l_tmpa_seq { $ \par\smallskip $ }
  $
}

\NewDocumentEnvironment{env-KO}{ b }
 {
   \pmbc_splitsemicolon:n { #1 }
 }{}


\ExplSyntaxOff

